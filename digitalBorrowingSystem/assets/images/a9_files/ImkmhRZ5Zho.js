if (self.CavalryLogger) { CavalryLogger.start_js(["Ff18s"]); }

__d("ImageDownloadTracker",["NetworkStatus","Promise","setTimeout"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=2,h=250;function a(a,c){var d=0,e;return new(b("Promise"))(function(f,i){function j(){var e=new Image();e.onload=function(){b("NetworkStatus").reportSuccess(),f()};e.onerror=function(){var a=d<=g;a?b("setTimeout")(j,h):(b("NetworkStatus").reportError(),i())};d++;c();e.src=a}b("NetworkStatus").isOnline()?j():e=b("NetworkStatus").onChange(function(a){a=a.online;a&&(j(),e.remove())})})}}),null);
__d("VisualCompletionUtil",["Visibility","cancelAnimationFrame","clearTimeout","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){"use strict";f.foregroundRequestAnimationFrame=a;f.getPixels=g;f.getRectIntersection=h;f.getViewportSize=i;f.isInAboveTheFold=c;f.offsetTop=d;f.trimHash=e;function a(a){if(b("Visibility").isHidden()){var c=b("setTimeout")(a,0);return function(){b("clearTimeout")(c)}}else{var d=b("requestAnimationFrame")(a);return function(){b("cancelAnimationFrame")(d)}}}function g(a){return(a.right-a.left)*(a.bottom-a.top)}function h(a,b){return{bottom:Math.max(Math.min(a.bottom,b.bottom),b.top),left:Math.min(Math.max(a.left,b.left),b.right),right:Math.max(Math.min(a.right,b.right),b.left),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function i(){return{height:window.innerHeight,width:window.innerWidth}}function c(a){if(typeof a.getBoundingClientRect!=="function")return!1;var b=i();a=a.getBoundingClientRect();var c=a.bottom,d=a.left,e=a.right;a=a.top;c=g(h({bottom:c,left:d,right:e,top:a},{bottom:b.height,left:0,right:b.width,top:-window.scrollY}));return c>0}function d(a,b){var c=0;a=a;while(a&&a.offsetParent&&typeof a.offsetTop==="number")c+=a.offsetTop,a=a.offsetParent;if(a&&a.offsetParent==null&&typeof a.getBoundingClientRect==="function"){var d=a.getBoundingClientRect();d=d.top;d>=0?c+=d:a===document.body&&(c-=b)}return c}function e(a){return a.split("#")[0]}}),null);
__d("vc-tracker.WWW",["ImageDownloadTracker","VisualCompletionUtil","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";var g,h,i={ATTRIBUTE_NAME:"data-visualcompletion",HERO_TRACING_HOLD:"HeroTracing",INTERACTION_TRACING_HOLD:"InteractionTracing",IGNORE:"ignore",IGNORE_DYNAMIC:"ignore-dynamic",IGNORE_LATE_MUTATION:"ignore-late-mutation",LOADING_STATE:"loading-state",MEDIA_VC_IMAGE:"media-vc-image"};c=i.ATTRIBUTE_NAME;f={IGNORE:(d={},d[c]=i.IGNORE,d),IGNORE_DYNAMIC:(f={},f[c]=i.IGNORE_DYNAMIC,f),IGNORE_LATE_MUTATION:(d={},d[c]=i.IGNORE_LATE_MUTATION,d),LOADING_STATE:(f={},f[c]=i.LOADING_STATE,f),MEDIA_VC_IMAGE:(d={},d[c]=i.MEDIA_VC_IMAGE,d)};var j=[],k="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?window.IntersectionObserver:null;function l(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}k==null&&j.push("IntersectionObserver");var m=window.MutationObserver||window.WebKitMutationObserver;m==null&&j.push("MutationObserver");var n=document.hidden!==void 0;function o(){if(n)return document.hidden;else return!1}n||j.push("VisibilityAPI");c=window.requestAnimationFrame;c==null&&j.push("requestAnimationFrame");c==null&&j.push("cancelAnimationFrame");function p(a){var b=a.indexOf("?");return b===-1?a:a.substring(0,b)}function q(a,b){b=b.substring(b.lastIndexOf(".")+1);if(b==="js"||b==="css")return b;else if(a==="img"||b==="gif"||b==="png"||b==="jpg"||b==="ico")return"img";else return a}function r(){return{css:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},img:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},js:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0}}}function s(a,c){if(typeof (g||(g=b("performance"))).getEntriesByType!=="function")return new Map();var d=r(),e=(g||(g=b("performance"))).getEntriesByType("resource").filter(function(b){return b.startTime>=a&&b.startTime<=c}).map(function(a){return{encodedBodySize:a.encodedBodySize,transferSize:a.transferSize,type:q(a.initiatorType,p(a.name))}}).filter(function(a){return d[a.type]});e.forEach(function(a){var b=d[a.type];b.encodedBodySize+=a.encodedBodySize;b.transferSize+=a.transferSize;b.totalCount++;a.transferSize===0&&b.cacheCount++});e=new Map();for(var f in d){var h=d[f];for(var i in h)e.set(f+"_"+i,h[i])}return e}var t=[],u=[],v={subscribe:function(a){t.push(a)},subscribeStart:function(a){u.push(a)},unsubscribe:function(a){t=t.filter(function(b){return b!==a})},unsubscribeStart:function(a){u=u.filter(function(b){return b!==a})},emit:function(a){t.forEach(function(b){return b(a)})},emitStart:function(a){u.forEach(function(b){return b(a)})}},w=b("performanceNavigationStart")(),x=/url\(.*(http.*)\)/gi,y=4;function z(){return{bottom:0,left:0,right:0,top:0}}function A(a){return{bottom:a.bottom,left:a.left,right:a.right,top:a.top}}function B(a){var b;return(a==null?void 0:(b=a.pagelet)==null?void 0:b.name)==="FeedUnit_1"||(a==null?void 0:(b=a.pagelet)==null?void 0:b.name)==="FeedUnit_{n}"}function C(a){var b;return((b=a.pagelet)==null?void 0:b.excludeFromMainVC)||B(a)||D(a)}function D(a){a=a.element;while(a){if(a.getAttribute(i.ATTRIBUTE_NAME)===i.IGNORE_LATE_MUTATION)return!0;a=a.parentElement}return!1}d=function(){function a(a,c,d,e,f){var g=this;this.$1=0;this.$2=0;this.$3=0;this.initialScrollY=0;this.scrolledVC=0;this.reported=!1;this.measureOriginalViewport=!0;this.mutationRoots=new Set();this.mutatedElementCount=0;this.visibilitychangeHandler=function(){n&&o()&&(g.addAnnotation("hidden",1),g.addFirstMarkerPoint("backgrounded",(h||(h=b("performanceAbsoluteNow")))()),window.removeEventListener("visibilitychange",g.visibilitychangeHandler))};this.scrollEventHandler=function(){g.$16=!0,g.markerPoints.has("scroll_start")||g.addMarkerPoint("scroll_start",(h||(h=b("performanceAbsoluteNow")))()),window.removeEventListener("scroll",g.scrollEventHandler)};this.config=f;this.$5=new Map();this.$6=new Map();this.$7=new Map();this.$8=[];this.$9=[];this.$10=0;this.$11=[];this.$12=new Set();this.$13=new Map();this.startTime=a;this.$14={height:0,width:0};this.initialScrollY=e==="INITIAL_LOAD"?0:window.scrollY;this.$15=this.initialScrollY;this.currentScrollY=this.initialScrollY;this.navSequence=c;this.traceID=d;this.markerPoints=new Map();this.annotations=new Map();this.tagSet=new Map();this.navDone=!1;this.interactionType=e;this.$16=!1;v.emitStart(e);window.addEventListener("scroll",this.scrollEventHandler,{passive:!0});this.addAnnotation("hidden",0);n&&(o()?(this.addAnnotation("hidden",1),this.addFirstMarkerPoint("backgrounded",this.startTime)):window.addEventListener("visibilitychange",this.visibilitychangeHandler))}var c=a.prototype;c.addAnnotation=function(a,b){this.annotations.set(a,b)};c.addFirstMarkerPoint=function(a,b,c){c===void 0&&(c={});var d=this.markerPoints.get(a);b>=this.startTime&&(!d||d.timestamp>b-this.startTime)&&this.markerPoints.set(a,{data:c,timestamp:b-this.startTime})};c.addMarkerPoint=function(a,b,c){c===void 0&&(c={}),b>=this.startTime&&this.markerPoints.set(a,{data:c,timestamp:b-this.startTime})};c.addMountPoint=function(a,b,c){this.$13.has(c)||this.$13.set(c,{data:{},element:a,timestamp:b})};c.addMountPointMetadata=function(a,b){var c=this.$13.get(a);c&&Object.keys(b).forEach(function(a){c.data[a]=b[a]})};c.addVisualElement=function(a,b,c,d,e){this.$16&&(this.currentScrollY=window.scrollY,this.$16=!1,window.addEventListener("scroll",this.scrollEventHandler,{passive:!0}));a={mutationSeq:a,element:b,timestamp:d,mutationType:c,scrollY:this.currentScrollY,visible:e};b instanceof HTMLImageElement&&(a.naturalWidth=b.naturalWidth,a.naturalHeight=b.naturalHeight);this.$11.push(a)};c.trackPagelet=function(a,b,c,d,e,f){f===void 0&&(f=!1),this.$7.set(a,{data:{},element:a,excludeFromMainVC:this.interactionType!=="INTERACTION"&&f,mutationSeq:0,name:b,pageletTypeName:e,points:{hydration:c-this.startTime},vcCallback:d})};c.addTag=function(a,b){this.tagSet.has(a)||this.tagSet.set(a,new Set());a=this.tagSet.get(a);a&&a.add(b)};c.calculate=function(a){var c=this;a===void 0&&(a=!1);window.removeEventListener("scroll",this.scrollEventHandler);window.removeEventListener("visibilitychange",this.visibilitychangeHandler);this.$14=b("VisualCompletionUtil").getViewportSize();var d=(h||(h=b("performanceAbsoluteNow")))();this.$10=0;this.$2=0;this.$3=0;this.setResourceTimingMap();this.initTree();a||this.getBackgroundImages();this.$1=this.calculatePaintedPixels(this.$8,this.$14.width*this.$14.height);var e={annotations:this.annotations,bgCheckLatency:this.$3,bgChecked:this.$10,bgNum:0,bgPixels:0,calcLatency:0,compNum:0,compPixels:0,elements:this.$9,finalScrollY:this.$15,imgNum:0,imgPixels:0,initialScrollY:this.initialScrollY,interactionType:this.interactionType,markerPoints:this.markerPoints,navComplete:h()-this.startTime,navSequence:this.navSequence,pagelets:Array.from(this.$7.values()),paintedPixels:this.$2,scrollY:window.scrollY,scrolledVC:this.scrolledVC,speedIndex:0,startTime:this.startTime,tagSet:this.tagSet,totalPixels:this.$1,traceId:this.traceID,tracePolicy:this.tracePolicy,vcWithoutImage:0,viewport:this.$14,visuallyComplete:0,wasSuccessful:!0};this.addAnnotation("mutationRootCount",this.mutationRoots.size);this.addAnnotation("mutatedElementCount",this.mutatedElementCount);this.addAnnotation("visualChangeRecordCount",this.$11.length);this.addAnnotation("paintedElementCount",this.$9.length);this.$9.length&&(this.$9=this.$9.sort(function(a,b){return b.latency-a.latency}),this.addMarkerPoint("FP",this.$9[this.$9.length-1].timestamp),this.$9.forEach(function(a){var b=a.element;if(!b)return;var d=a.pagelet;if(d==null?void 0:d.excludeFromMainVC){var f="vcIncluding"+d.name;c.markerPoints.has(f)||e.markerPoints.set(f,{timestamp:Math.max(a.latency,e.visuallyComplete)})}else{if(e.vcWithoutImage===0&&a.type==="component"){f={height:a.rectangle.bottom-a.rectangle.top,mutationType:a.mutationType,tagName:b.tagName||"",type:a.type,width:a.rectangle.right-a.rectangle.left};d&&(f.pagelet=d.name);e.vcWithoutImage=a.latency;e.markerPoints.set("vcWithoutImage",{data:f,element:b,timestamp:a.latency})}if(e.visuallyComplete===0){f={height:a.rectangle.bottom-a.rectangle.top,mutationType:a.mutationType,tagName:b.tagName||"",type:a.type,width:a.rectangle.right-a.rectangle.left};d&&(f.pagelet=d.name);e.visuallyComplete=a.latency;e.markerPoints.set("visuallyComplete",{data:f,element:b,timestamp:a.latency});e.scrollY=a.scrollY}}e.speedIndex+=a.pixels/c.$2*a.latency;switch(a.type){case"component":e.compNum++;e.compPixels+=a.pixels;break;case"img":e.imgNum++;e.imgPixels+=a.pixels;break;case"bg":e.bgNum++;e.bgPixels+=a.pixels;break}}));this.logPagelets();this.logPixelProgress();a&&(e.visuallyComplete=e.vcWithoutImage=(h||(h=b("performanceAbsoluteNow")))()-this.startTime,e.markerPoints.set("visuallyComplete",{data:{},timestamp:e.visuallyComplete}),e.markerPoints.set("vcWithoutImage",{data:{},timestamp:e.vcWithoutImage}));e.calcLatency=h()-d;this.setupMetaData(e);this.reported=!0;return e};c.tearDown=function(){this.$6.clear(),this.$8=[],this.$11=[],this.$5.clear(),this.$12.clear(),this.$13.clear(),this.mutationRoots.clear(),this.config.retain_element_reference||(this.$9.forEach(function(a){delete a.element}),this.$7.forEach(function(a){delete a.element})),this.$7.clear(),this.markerPoints.forEach(function(a){delete a.element})};c.findPagelet=function(a){a=a;while(a){if(this.$7.has(a))return this.$7.get(a);a=a.parentElement}return null};c.findParent=function(a){a=a.parentElement;while(a){if(this.$6.has(a))return this.$6.get(a);a=a.parentElement}return null};c.checkExcluded=function(a){a=a;while(a){if(this.$12.has(a))return!0;else if(this.$6.has(a)||this.mutationRoots.has(a))return!1;else if(typeof a.getAttribute==="function"&&a.getAttribute(i.ATTRIBUTE_NAME)===i.IGNORE)return!0;a=a.parentElement}return!1};c.getBackgroundImages=function(){var c=this,d=(h||(h=b("performanceAbsoluteNow")))();this.$8.forEach(function(d){d=d.element;if(d&&typeof d.querySelectorAll==="function"){d=d.querySelectorAll("div,i,span,li");Array.prototype.forEach.call(d,function(d){if(d.textContent||d.children.length||c.checkExcluded(d))return;var e=c.findParent(d);if(!e)return;var f=b("VisualCompletionUtil").offsetTop(d,c.initialScrollY),g=c.getRelativeBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=b("VisualCompletionUtil").getRectIntersection(g,e.rectangle);var h=b("VisualCompletionUtil").getPixels(g);if(h===0||c.measureOriginalViewport&&f>c.$14.height)return;var i=c.getStyleBackground(d);if(i==null)return;i=b("VisualCompletionUtil").trimHash(i);var j=c.$5.get(i);if(j!=null){j=j+w;var k=c.findPagelet(d);if(j>e.timestamp){d={children:[],element:d,hadLateMutation:!1,hadLateMutationLegacy:!1,hadLateMutationExpected:!1,hadLateMutationUnexpected:!1,latency:j-c.startTime,mutationSeq:e.mutationSeq,mutationType:"bg",offsetTop:f,pagelet:k,parent:e,pixels:k&&k.excludeFromMainVC?0:h,rectangle:g,scrollY:e.scrollY,timestamp:j,type:"bg",url:i,veid:String(a.$4++)};e.children.push(d)}}})}});this.$3=h()-d};c.getRelativeBoundingClientRect=function(a,b){var c=z();if(typeof a.getBoundingClientRect!=="function")return c;c=A(a.getBoundingClientRect());return{bottom:b!=null?b+(c.bottom-c.top):c.bottom,left:c.left,right:c.right,top:b!=null?b:c.top}};c.findFirstVisibleChild=function(a){var c=this,d=[a];a=function(){var a=[],e=0,f=void 0;d.forEach(function(d){if(typeof d.getBoundingClientRect!=="function")return;var g=A(d.getBoundingClientRect()),h=b("VisualCompletionUtil").getPixels(g);if(h>0&&(g.bottom<=0||g.right<=0||g.left>=c.$14.width||g.top>=c.$14.height))return;h>e&&!c.checkExcluded(d)&&(e=h,f=d);a=a.concat(Array.from(d.children))});if(e>0&&f)return{v:f};d=a};while(d&&d.length){var e=a();if(typeof e==="object")return e.v}return null};c.getRectangle=function(a,c){a=this.findFirstVisibleChild(a);if(a==null)return z();a=this.getRelativeBoundingClientRect(a);var d=a.bottom,e=a.left,f=a.right;a=a.top;d={bottom:d,left:e,right:f,top:a};return b("VisualCompletionUtil").getRectIntersection(d,c)};c.getStyleBackground=function(a){if(typeof window.getComputedStyle!=="function")return null;this.$10++;a=window.getComputedStyle(a);var b=a["background-image"];if(a.visibility!=="hidden"&&b&&b!=="none"){x.lastIndex=0;a=x.exec(b);if(a&&a.length>1)return a[1].replace('"',"")}return null};c.excludeElement=function(a){this.$12.add(a)};c.initTree=function(){var c=this,d={bottom:this.$14.height,left:0,right:this.$14.width,top:-this.initialScrollY};this.$11=this.$11.sort(function(a,b){return a.timestamp-b.timestamp});var e=0,f=0;this.$11.forEach(function(g){var h=g.element,j=g.mutationSeq,k=g.mutationType,l=g.naturalHeight,m=g.naturalWidth,n=g.scrollY,o=g.timestamp;g=g.visible;if(h.getAttribute(i.ATTRIBUTE_NAME)===i.MEDIA_VC_IMAGE&&g===!0&&l!=null&&m!=null){g=l*m;var p=Number(g<e*y);m={ignored:p,resolution:g,mutationType:k,naturalWidth:m,naturalHeight:l};e>0&&(m.ratio=g/e);c.addMarkerPoint("mediaVCImage_"+f++,o,m);if(p)return;else c.addMarkerPoint("ImageMediaVC",o),e=g}l=c.findFirstVisibleChild(h);if(l==null)return;m=b("VisualCompletionUtil").offsetTop(l,c.initialScrollY);p=c.getRelativeBoundingClientRect(l,c.measureOriginalViewport?m:void 0);g=b("VisualCompletionUtil").getRectIntersection(p,d);if(c.inAboveTheFold(l)){o-c.startTime>c.scrolledVC&&(c.scrolledVC=o-c.startTime,c.$15=n);if(c.measureOriginalViewport&&m>c.$14.height)return;h=c.findPagelet(l);p={children:[],element:l,hadLateMutation:!1,hadLateMutationLegacy:!1,hadLateMutationExpected:!1,hadLateMutationUnexpected:!1,latency:o-c.startTime,mutationSeq:j,mutationType:k,offsetTop:m,pagelet:h,parent:null,pixels:h&&h.excludeFromMainVC?0:b("VisualCompletionUtil").getPixels(g),rectangle:g,scrollY:n,timestamp:o,type:k==="imgLoad"||k==="mutationImageAttribute"?"img":"component",veid:String(a.$4++)};c.$6.set(l,p)}});this.$6.forEach(function(a){var d=a.element;if(d){d=c.findParent(d);d?(a.rectangle=b("VisualCompletionUtil").getRectIntersection(a.rectangle,d.rectangle),a.pixels=Math.min(a.pixels,b("VisualCompletionUtil").getPixels(a.rectangle)),a.type!=="component"&&(a.scrollY=d.scrollY),d.children.push(a),a.parent=d):c.$8.push(a)}})};c.logPixelProgress=function(){var a=this,b=new Map([["vc98",.02],["vc95",.05]]),c=0,d=0,e=function(e){var f=a.$9[e];c+=f.pixels;if(b.size===0)return"break";b.forEach(function(b,d){!a.markerPoints.has(d)&&c/a.$2>=b&&a.addMarkerPoint(d,f.latency+a.startTime)});f.type==="component"&&(d+=f.pixels,f.children.forEach(function(a){a.type!=="component"&&(d+=a.pixels)}),b.forEach(function(c,e){!a.markerPoints.has(e+"WithoutImage")&&d/a.$2>=c&&(a.addMarkerPoint(e+"WithoutImage",f.latency+a.startTime),b["delete"](e))}))};for(var f=0;f<this.$9.length;f++){var g=e(f);if(g==="break")break}};c.logLateMutations=function(){this.$9.forEach(function(a){var b=a.pagelet;b!=null&&a.mutationSeq!==b.mutationSeq&&b.points.hydration!=null&&b.points.firstPaint!=null&&b.points.hydration>b.points.firstPaint&&!D(a)&&(b.data.hadLateMutation=1,a.hadLateMutation=!0)})};c.logLateMutationsLegacy=function(){var a=null;this.$7.forEach(function(b,c){b.name==="root"&&(a=b.mutationSeq)});this.$9.forEach(function(b){var c=b.pagelet;c!=null&&a!=null&&b.mutationSeq>a&&!c.excludeFromMainVC&&b.type==="component"&&(c.data.hadLateMutationLegacy=1,b.hadLateMutationLegacy=!0)})};c.logLateMutationsFinal=function(){var a=null;this.$7.forEach(function(b,c){b.name==="root"&&(a=b.mutationSeq)});this.$9.forEach(function(b){var c=b.pagelet;c!=null&&a!=null&&b.mutationSeq>a&&b.type==="component"&&(C(b)?(c.data.hadLateMutationExpected=1,b.hadLateMutationExpected=!0):(c.data.hadLateMutationUnexpected=1,b.hadLateMutationUnexpected=!0))})};c.logPagelets=function(){var a=this;this.$7.forEach(function(b,c){if(!a.inViewport(c)){b.vcCallback!=null&&b.vcCallback(null,null,b.data);a.$7["delete"](c);return}c=a.$6.has(c)?a.$6.get(c):a.findParent(c);if(c){var d=c.latency;b.points.firstPaint=d;b.points.visuallyComplete=d;b.points.vcWithoutImage=d;b.mutationSeq=c.mutationSeq}});this.logLateMutations();this.logLateMutationsLegacy();this.logLateMutationsFinal();this.$9.forEach(function(b){var c=b.pagelet;while(c!=null){var d,e=b.latency;c.points.visuallyComplete=Math.max((d=c.points.visuallyComplete)!=null?d:0,e);if(b.type==="component"){c.points.vcWithoutImage=Math.max((d=c.points.vcWithoutImage)!=null?d:0,e)}c=c.element&&c.element.parentElement?a.findPagelet(c.element.parentElement):null}});this.$7.forEach(function(b){b.points.visuallyComplete!=null&&b.pageletTypeName!=null&&b.pageletTypeName!==""&&a.markerPoints.set(b.pageletTypeName+"VC",{timestamp:b.points.visuallyComplete}),b.points.vcWithoutImage!=null&&a.markerPoints.set("VC_"+b.name,{data:b.data,timestamp:b.points.vcWithoutImage}),b.vcCallback!=null&&b.points.visuallyComplete!=null&&b.points.vcWithoutImage!=null&&b.vcCallback(a.startTime+b.points.visuallyComplete-w,a.startTime+b.points.vcWithoutImage-w,b.data),a.config.retain_element_reference||delete b.element});this.$13.forEach(function(b,c){var d=b.data;b=b.timestamp;a.addMarkerPoint("Mount_"+c,b,d)});this.$13.clear()};c.setResourceTimingMap=function(){var a=this;if(typeof (g||(g=b("performance"))).getEntriesByType==="function"){var c=(g||(g=b("performance"))).getEntriesByType("resource");c.forEach(function(c){var d=b("VisualCompletionUtil").trimHash(c.name);a.$5.set(d,c.responseEnd)})}};c.calculatePaintedPixels=function(a,b){var c=this,d=b,e=0;a.sort(function(a,b){return b.timestamp-a.timestamp}).forEach(function(a){a.pixels=Math.min(d,a.pixels),e+=a.pixels,d-=a.pixels,a.pixels-=c.calculatePaintedPixels(a.children,a.pixels),a.timestamp>c.startTime&&(c.$2+=a.pixels,c.$9.push(a),a.element&&c.$6.set(a.element,a))});return e};c.inAboveTheFold=function(a){a=a;var c=b("VisualCompletionUtil").getViewportSize();a=b("VisualCompletionUtil").getPixels(this.getRectangle(a,{bottom:c.height,left:0,right:c.width,top:-window.scrollY}));return a>0};c.inOriginalViewport=function(a){return this.inAboveTheFold(a)&&b("VisualCompletionUtil").offsetTop(a,this.initialScrollY)<=this.$14.height};c.inViewport=function(a){return this.measureOriginalViewport?this.inOriginalViewport(a):this.inAboveTheFold(a)};c.setInitialScrollY=function(a){this.initialScrollY=a,this.currentScrollY=a};c.setTracePolicy=function(a){this.tracePolicy=a};c.setupMetaData=function(a){var c=this;a.tracePolicy!=null&&a.tracePolicy!==""&&a.annotations.set("tracePolicy",a.tracePolicy);a.annotations.set("interactionId",a.traceId);a.annotations.set("height",a.viewport.height);a.annotations.set("width",a.viewport.width);a.annotations.set("scrollY",a.scrollY);a.annotations.set("finalScrollY",a.finalScrollY);a.annotations.set("initialScrollY",a.initialScrollY);a.annotations.set("overhead",a.calcLatency);a.annotations.set("navSequence",a.navSequence);a.markerPoints.set("logVC",{timestamp:a.navComplete});a.speedIndex>0&&a.markerPoints.set("speedIndex",{timestamp:a.speedIndex});a.navSequence===1&&(g||(g=b("performance")))&&(g||(g=b("performance"))).timing&&((g||(g=b("performance"))).timing.responseStart&&a.markerPoints.set("TTFB",{timestamp:(g||(g=b("performance"))).timing.responseStart-a.startTime}));a.elements.length&&(this.measureOriginalViewport&&a.scrolledVC>0&&a.markerPoints.set("scrolledVC",{timestamp:a.scrolledVC}));var d=s(a.startTime-b("performanceNavigationStart")(),a.startTime+a.visuallyComplete-b("performanceNavigationStart")());d.forEach(function(b,c){a.annotations.set(c,b)});j.forEach(function(a){c.addTag("unavailableAPIs",a)});j.length>0&&(a.wasSuccessful=!1)};return a}();d.$4=1;var E=b("performanceNavigationStart")(),F=new Map();function a(){return new Map(F)}function G(a){if(a==null||a==="")return!1;a=a.replace(/ /g,"");return a.indexOf("display:none")>=0||a.indexOf("visibility:hidden")>=0}n&&typeof window.addEventListener==="function"&&window.addEventListener("visibilitychange",function(){o()&&F.forEach(function(a){a.pendingMutations.forEach(function(b,c){a.addVisualElement(b.mutationSeq,c,b.mutationType,b.displayTimestamp),a.intersectionObserver&&a.intersectionObserver.unobserve(c),a.unlock(b.lockId)}),a.pendingMutations.clear()})});c=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f){var g;g=a.call(this,b,c,d,e,f)||this;g.pendingLocks=new Set();g.pendingImages=new Set();g.$VisualCompletionTraceBase1=new Map();g.loadingStateObserver=null;g.$VisualCompletionTraceBase2=[];g.pendingLoadingElements=new Set();g.$VisualCompletionTraceBase3=0;g.$VisualCompletionTraceBase4=[];g.$VisualCompletionTraceBase5=[];g.mutationSeq=0;g.mutationObserver=null;g.mutationObserverConfig={attributeFilter:["hidden","style","href","src"],attributeOldValue:!0,attributes:!0,characterData:!0,childList:!0,subtree:!0};g.intersectionObserver=null;g.pendingMutations=new Map();g.loggingScheduled=!1;g.intersectionObserverCallback=function(a){Array.prototype.forEach.call(a,function(a){var b=g.pendingMutations.get(a.target);b&&(g.addVisualElement(b.mutationSeq,a.target,b.mutationType,a.time+E,l(a)),g.intersectionObserver!=null&&g.intersectionObserver.unobserve(a.target),g.unlock(b.lockId),g.pendingMutations["delete"](a.target))})};g.mutationRecordHandler=function(a){g.mutationSeq++;var b=[];Array.from(a).forEach(function(a){if(a.target.nodeType!==Node.ELEMENT_NODE)return;var c=a.target;if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.from(a.addedNodes).forEach(function(a){a=a;if(g.shouldIgnoreMutation(a))return;if(a.tagName==="IMG"||a.tagName==="image"){g.trackImage(g.mutationSeq,a,"imgLoad");return}else if(typeof a.querySelectorAll==="function"){var c=a.querySelectorAll("img, image");Array.from(c).forEach(function(a){if(g.shouldIgnoreMutation(a))return;g.trackImage(g.mutationSeq,a,"imgLoad")})}b.push([a,"mutationAdd"])});else if(a.type==="attributes"&&!g.shouldIgnoreMutation(c))if(a.attributeName==="hidden")c.hasAttribute("hidden")||b.push([c,"mutationHiddenAttribute"]);else if(a.attributeName==="style"){var d=c.getAttribute("style"),e=a.oldValue;G(e)&&!G(d)&&b.push([c,"mutationStyleAttribute"])}else(c.tagName==="image"&&a.attributeName==="href"||c.tagName==="IMG"&&a.attributeName==="src")&&g.trackImage(g.mutationSeq,c,"mutationImageAttribute")});g.trackElements(b,g.mutationSeq)};g.loadingStateObserverCallback=function(a){Array.from(a).forEach(function(a){l(a)?g.loadingElementAdded(a.target,a.time+E):g.loadingElementRemoved(a.target,a.time+E)})};m&&(g.mutationObserver=new m(g.mutationRecordHandler));k&&(g.loadingStateObserver=new k(g.loadingStateObserverCallback),g.intersectionObserver=new k(g.intersectionObserverCallback));F.set(d,babelHelpers.assertThisInitialized(g));return g}var d=c.prototype;d.addMutationRoot=function(a){if(this.checkDuplicatedMutationRoot(a))return function(){};this.mutationSeq++;this.trackElements([[a,"mutationRoot"]],this.mutationSeq);return this.observeMutation(a)};d.checkInvisibleStyleElement=function(a){a=a;while(a&&typeof a.getAttribute==="function"&&typeof a.hasAttribute==="function"){if(G(a.getAttribute("style"))||a.hasAttribute("hidden"))return!0;a=a.parentElement}return!1};d.checkResourceTimingDone=function(a){a=(g||(g=b("performance")))&&(g||(g=b("performance"))).getEntriesByName&&(g||(g=b("performance"))).getEntriesByName(a);return a&&a.length>0&&a[0].responseEnd};d.shouldIgnoreMutation=function(a){if(this.checkInvisibleStyleElement(a))return!0;var b=a;while(b){if(this.mutationRoots.has(b))return!1;if(typeof b.getAttribute==="function"){var c=b.getAttribute(i.ATTRIBUTE_NAME);if(c===i.IGNORE)return!0;if(b!==a&&c===i.IGNORE_DYNAMIC){this.excludeElement(a);return!0}}b=b.parentElement}return!1};d.dumpLocks=function(){return[this.pendingLocks,this.pendingLoadingElements,this.pendingImages]};d.lock=function(a){var b=this;this.pendingLocks.add(a);return function(){b.unlock(a)}};d.imageDone=function(a){if(!this.pendingImages.has(a))return;this.pendingImages["delete"](a);this.attemptMeasurement()};d.imageWait=function(a){this.pendingImages.add(a)};d.loadingElementRemoved=function(a,b){this.pendingLoadingElements.has(a)&&(this.pendingLoadingElements["delete"](a),this.addMarkerPoint("loadingState_end",b),this.attemptMeasurement())};d.loadingElementAdded=function(a,b){this.addFirstMarkerPoint("loadingState_start",b),this.pendingLoadingElements.add(a)};d.waitLoadingState=function(a){var c=this,d=this.$VisualCompletionTraceBase1.get(a);if(d)return function(){d(),c.loadingElementRemoved(a,(h||(h=b("performanceAbsoluteNow")))())};if(typeof a.getAttribute==="function"&&a.getAttribute(i.ATTRIBUTE_NAME)===i.IGNORE)return function(){};this.loadingStateObserver&&this.loadingStateObserver.observe(a);(n&&!o()||b("VisualCompletionUtil").isInAboveTheFold(a))&&this.loadingElementAdded(a,(h||(h=b("performanceAbsoluteNow")))());var e=function(){c.loadingStateObserver&&c.loadingStateObserver.unobserve(a),c.$VisualCompletionTraceBase1["delete"](a)};this.$VisualCompletionTraceBase1.set(a,e);return function(){e(),c.loadingElementRemoved(a,(h||(h=b("performanceAbsoluteNow")))())}};d.trackImage=function(a,c,d){var e=this;if(c.complete){c.getAttribute(i.ATTRIBUTE_NAME)===i.MEDIA_VC_IMAGE&&this.scheduleIntersectionObserver(a,c,d,(h||(h=b("performanceAbsoluteNow")))());return}var f=c.currentSrc||c.src;if(c.tagName==="image"&&typeof c.getAttribute==="function"){var g=c.getAttribute("xlink:href");g!=null&&(f=g)}if(f==null||f===""||f.indexOf("http")!==0)return;var j=function(){e.imageDone(f)};g=function(){e.imageWait(f)};b("ImageDownloadTracker")(f,g).then(function(){var f=(h||(h=b("performanceAbsoluteNow")))();e.scheduleIntersectionObserver(a,c,d,f);j()})["catch"](function(){return j()})};d.unlock=function(a){if(!this.pendingLocks.has(a))return;this.pendingLocks["delete"](a);this.attemptMeasurement()};d.checkLoadingStates=function(a){var b=this;if(typeof a.getAttribute==="function"&&a.getAttribute(i.ATTRIBUTE_NAME)===i.LOADING_STATE)this.waitLoadingState(a);else if(typeof a.querySelectorAll==="function"){a=a.querySelectorAll("["+i.ATTRIBUTE_NAME+"="+i.LOADING_STATE+"]");Array.from(a).forEach(function(a){b.waitLoadingState(a)})}};d.checkDuplicatedMutationRoot=function(a){a=a;while(a!=null){if(this.mutationRoots.has(a))return!0;a=a.parentElement}return!1};d.observeMutation=function(a){var b=this;a.nodeType===Node.ELEMENT_NODE&&this.mutationObserver&&this.mutationObserver.observe(a,this.mutationObserverConfig);this.mutationRoots.add(a);return function(){b.mutationRoots["delete"](a)}};d.scheduleIntersectionObserver=function(a,c,d,e){var f=this;this.mutatedElementCount++;if(n&&o())this.addVisualElement(a,c,d,e);else if(k){var g=this.pendingMutations.get(c);g&&(this.intersectionObserver&&this.intersectionObserver.unobserve(c),this.pendingMutations["delete"](c),this.pendingLocks["delete"](g.lockId));g="m_"+this.$VisualCompletionTraceBase3++;this.intersectionObserver&&this.intersectionObserver.observe(c);this.lock(g);this.pendingMutations.set(c,{displayTimestamp:e,lockId:g,mutationType:d,mutationSeq:a})}else{var i="m_"+this.$VisualCompletionTraceBase3++;this.lock(i);b("VisualCompletionUtil").foregroundRequestAnimationFrame(function(){f.addVisualElement(a,c,d,(h||(h=b("performanceAbsoluteNow")))()),f.unlock(i)})}};d.trackElements=function(a,c){var d=this,e=[];a.forEach(function(a){var b=a[0];b.nodeType===Node.ELEMENT_NODE&&b.tagName!=="IMG"&&b.tagName!=="image"&&e.push(a)});var f=(h||(h=b("performanceAbsoluteNow")))();e.forEach(function(a){var b=a[0];a=a[1];d.checkLoadingStates(b);d.scheduleIntersectionObserver(c,b,a,f)})};d.onBeforeComplete=function(a){this.$VisualCompletionTraceBase4.push(a)};d.onComplete=function(a){this.$VisualCompletionTraceBase5.push(a)};d.attemptMeasurement=function(a){var b=this;a===void 0&&(a=!1);if(this.loggingScheduled||this.reported||this.pendingLocks.size>0||this.pendingLoadingElements.size>0||this.pendingImages.size>0)return;this.loggingScheduled=!0;var c=function(){b.mutationObserver&&b.mutationObserver.disconnect();b.$VisualCompletionTraceBase1.forEach(function(a){a()});b.loadingStateObserver&&b.loadingStateObserver.disconnect();b.$VisualCompletionTraceBase1.clear();b.$VisualCompletionTraceBase2.forEach(function(a){a&&a.disconnect()});F["delete"](b.traceID);b.intersectionObserver&&b.intersectionObserver.disconnect();b.pendingMutations.clear();var c=b.calculate(a);b.$VisualCompletionTraceBase4.forEach(function(a){a(c)});b.$VisualCompletionTraceBase4=[];v.emit(c);b.$VisualCompletionTraceBase5.forEach(function(a){a(c)});b.$VisualCompletionTraceBase5=[];b.tearDown()},d=this.config.defer_expensive_calculation&&!a?this.config.defer_expensive_calculation:function(a){return a()};d(c)};d.forceMeasurement=function(){var a=this;this.pendingLocks.size>0&&(this.addAnnotation("incompleteLockCount",this.pendingLocks.size),this.pendingLocks.forEach(function(b){a.addTag("incompleteLocks",b)}));this.pendingLoadingElements.size>0&&this.addAnnotation("incompleteLoadingElementsCount",this.pendingLoadingElements.size);this.pendingImages.size>0&&this.addAnnotation("incompleteImageCount",this.pendingImages.size);this.pendingLocks.clear();this.pendingLoadingElements.clear();this.pendingImages.clear();this.attemptMeasurement(!0)};return c}(d);var H=new Set(),I=null,J=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f){var g;g=b.call(this,a,c,d,e,f)||this;H.forEach(function(a){b.prototype.observeMutation.call(babelHelpers.assertThisInitialized(g),a)});I=babelHelpers.assertThisInitialized(g);return g}var c=a.prototype;c.observeMutation=function(a){var c=b.prototype.observeMutation.call(this,a);H.add(a);return function(){c(),H["delete"](a)}};a.excludeElement=function(a){I!=null&&!I.reported&&I.excludeElement(a)};return a}(c);d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f){b=a.call(this,b,c,d,e,f)||this;b.measureOriginalViewport=!1;return b}var c=b.prototype;c.trackElements=function(b,c){var d=this;a.prototype.trackElements.call(this,b,c);b.forEach(function(a){a=a[0];d.interactionType==="INTERACTION"&&J.excludeElement(a)})};return b}(c);c={VisualCompletionTraceForInteraction:d,VisualCompletionTraceForNavigation:J,VisualCompletionTraceObserver:v,getCurrentVCTraces:a,VisualCompletionAttributes:f,VisualCompletionConstants:i};e.exports=c}),null);
__d("CometVCTracker",["vc-tracker.WWW"],(function(a,b,c,d,e,f){"use strict";a=b("vc-tracker.WWW");e.exports=a}),null);